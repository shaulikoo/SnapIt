import gphoto2 as gp
import os
import time

def pic():
    camera = gp.check_result(gp.gp_camera_new())
    context = gp.gp_context_new()
    gp.gp_camera_init(camera, context)
    file_path = gp.check_result(gp.gp_camera_capture(camera, gp.GP_CAPTURE_IMAGE, context))
    #name=str(int(round(time.time())))
    name='1.jpg'
    target = os.path.join('/home/pi/SnapIt/public/images', name)
    camera_file = gp.check_result(gp.gp_camera_file_get(camera, file_path.folder, file_path.name, gp.GP_FILE_TYPE_NORMAL, context))
    gp.check_result(gp.gp_file_save(camera_file, target))
    gp.gp_camera_exit(camera, context)
    print target

if __name__ == "__main__":
    pic()
